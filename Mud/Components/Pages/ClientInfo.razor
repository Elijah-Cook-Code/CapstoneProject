@page "/clients"
@using MudBlazor
@using MudDb.Data
@using Microsoft.EntityFrameworkCore
@inject AppDbContext dbContext 
@inject DatabaseService _databaseService


<MudContainer>
    
    <MudCard>
        <MudCardContent>
            @if (clients is null)

            {
                <MudText Color="Color.Warning">Loading clients...</MudText>
            }

            else if (!clients.Any())

            {
                <MudText Color="Color.Secondary">No clients found.</MudText>
            }

            else

            {
                <MudText Typo="Typo.h6">Clients count: @clients.Count</MudText>

                <MudTable Items="clients" Hover="true" Striped="true" Dense="true">
                    <HeaderContent>
                        <MudTr>
                            <MudTh Style="width: 50px;">Id</MudTh>
                            <MudTh Style="width: 150px;">Name</MudTh>
                            <MudTh Style="width: 120px;">Date</MudTh>
                            <MudTh Style="width: 100px;">A Chest</MudTh>
                            <MudTh Style="width: 100px;">B Seat</MudTh>
                            <MudTh Style="width: 100px;">C Waist</MudTh>
                            <MudTh Style="width: 100px;">D Trouser</MudTh>
                            <MudTh Style="width: 130px;">E-F Half Back</MudTh>
                            <MudTh Style="width: 160px;">G-H Back Neck to Waist</MudTh>
                            <MudTh Style="width: 130px;">G-I Syce Depth</MudTh>
                            <MudTh Style="width: 170px;">I-L Sleeve Length (One-Piece)</MudTh>
                            <MudTh Style="width: 180px;">E-I Sleeve Length (Two-Piece)</MudTh>
                            <MudTh Style="width: 100px;">N Inside Leg</MudTh>
                            <MudTh Style="width: 100px;">P-Q Body Rise</MudTh>
                            <MudTh Style="width: 120px;">R Close Wrist</MudTh>
                            <MudTh Style="width: 200px;">Notes</MudTh>
                        </MudTr>
                    </HeaderContent>

                    <RowTemplate Context="client">
                        <MudTr>
                            <MudTd Style="width: 50px;">@client.Id</MudTd>
                            <MudTd Style="width: 150px;">@client.Name</MudTd>
                            <MudTd Style="width: 120px;">@client.Date.ToShortDateString()</MudTd>
                            <MudTd Style="width: 100px;">@client.A_ChestMeasurement</MudTd>
                            <MudTd Style="width: 100px;">@client.B_SeatMeasurement</MudTd>
                            <MudTd Style="width: 100px;">@client.C_WaistMeasurement</MudTd>
                            <MudTd Style="width: 100px;">@client.D_TrouserMeasurement</MudTd>
                            <MudTd Style="width: 130px;">@client.E_F_HalfBackMeasurement</MudTd>
                            <MudTd Style="width: 160px;">@client.G_H_BackNeckToWaistMeasurement</MudTd>
                            <MudTd Style="width: 130px;">@client.G_I_SyceDepthMeasurement</MudTd>
                            <MudTd Style="width: 170px;">@client.I_L_SleeveLengthOnePieceMeasurement</MudTd>
                            <MudTd Style="width: 180px;">@client.E_I_SleeveLengthTwoPieceMeasurement</MudTd>
                            <MudTd Style="width: 100px;">@client.N_InsideLegMeasurement</MudTd>
                            <MudTd Style="width: 100px;">@client.P_Q_BodyRiseMeasurement</MudTd>
                            <MudTd Style="width: 120px;">@client.R_CloseWristMeasurement</MudTd>
                            <MudTd Style="width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">@client.Notes</MudTd>
                        </MudTr>
                    </RowTemplate>
                </MudTable>
            }
        </MudCardContent>
    </MudCard>
</MudContainer>

@code {
    private List<Client> clients;



    protected override async Task OnInitializedAsync()

    {

        clients = await dbContext.Clients.ToListAsync();

    }
}

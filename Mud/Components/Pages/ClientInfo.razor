@page "/clients"
@using MudBlazor
@using MudDb.Data
@using Microsoft.EntityFrameworkCore
@inject AppDbContext dbContext 
@inject DatabaseService _databaseService


<MudContainer>
    
    <MudCard>
        <MudCardContent>
            @if (clients is null)

            {
                <MudText Color="Color.Warning">Loading clients...</MudText>
            }

            else if (!clients.Any())

            {
                <MudText Color="Color.Secondary">No clients found.</MudText>
            }

            else

            {
                <MudText Typo="Typo.h6">Clients count: @clients.Count</MudText>

                <MudTable Items="clients" Hover="true" Striped="true" Dense="true">
                    <HeaderContent>
                        <MudTh>Id</MudTh>
                        <MudTh>Name</MudTh>
                        <MudTh>Date</MudTh>
                        <MudTh>A Chest</MudTh>
                        <MudTh>B Seat</MudTh>
                        <MudTh>C Waist</MudTh>
                        <MudTh>D Trouser</MudTh>
                        <MudTh>E-F Half Back</MudTh>
                        <MudTh>G-H Back Neck to Waist</MudTh>
                        <MudTh>G-I Syce Depth</MudTh>
                        <MudTh>I-L Sleeve Length (One-Piece)</MudTh>
                        <MudTh>E-I Sleeve Length (Two-Piece)</MudTh>
                        <MudTh>N Inside Leg</MudTh>
                        <MudTh>P-Q Body Rise</MudTh>
                        <MudTh>R Close Wrist</MudTh>
                        <MudTh>Notes</MudTh>
                    </HeaderContent>

                    <RowTemplate Context="client">
                        <MudTr>
                            <MudTd>@client.Id</MudTd>
                            <MudTd>@client.Name</MudTd>
                            <MudTd>@client.Date.ToShortDateString()</MudTd>
                            <MudTd>@client.A_ChestMeasurement</MudTd>
                            <MudTd>@client.B_SeatMeasurement</MudTd>
                            <MudTd>@client.C_WaistMeasurement</MudTd>
                            <MudTd>@client.D_TrouserMeasurement</MudTd>
                            <MudTd>@client.E_F_HalfBackMeasurement</MudTd>
                            <MudTd>@client.G_H_BackNeckToWaistMeasurement</MudTd>
                            <MudTd>@client.G_I_SyceDepthMeasurement</MudTd>
                            <MudTd>@client.I_L_SleeveLengthOnePieceMeasurement</MudTd>
                            <MudTd>@client.E_I_SleeveLengthTwoPieceMeasurement</MudTd>
                            <MudTd>@client.N_InsideLegMeasurement</MudTd>
                            <MudTd>@client.P_Q_BodyRiseMeasurement</MudTd>
                            <MudTd>@client.R_CloseWristMeasurement</MudTd>
                            <MudTd>@client.Notes</MudTd>
                        </MudTr>
                    </RowTemplate>
                </MudTable>
            }
        </MudCardContent>
    </MudCard>
</MudContainer>

@code {
    private List<Client> clients;



    protected override async Task OnInitializedAsync()

    {

        clients = await dbContext.Clients.ToListAsync();

    }
}
